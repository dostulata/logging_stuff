{{ ansible_managed | comment }}

global:
  {{ prometheus_global | to_nice_yaml(indent=2,sort_keys=False) | indent(2, False) }}

scrape_configs:
  - job_name: {{ self_monitoring_job_name }}

    scrape_interval: {{ self_monitoring_scrape_interval }}
    scrape_timeout: {{ self_monitoring_scrape_timeout }}

    metrics_path: {{ self_monitoring_metrics_path }}
    scheme: {{ self_monitoring_scheme }}

    static_configs:
      - targets: ['{{ self_monitoring_target }}']

  - job_name: file_sd
    file_sd_configs:
      - files:
        - "{{ file_sd_path }}/*.yml"
